# TG機器人配置指南

## 🚨 **問題原因**
您的TG機器人點擊"申請免費試用"後沒有響應，是因為機器人沒有運行。機器人沒有運行的原因是缺少必要的環境變量配置。

## 🛠️ **快速解決方案**

### **步驟1：獲取Bot Token**
1. 在Telegram中搜索 `@BotFather`
2. 發送 `/newbot` 創建新機器人
3. 按提示設置機器人名稱和用戶名
4. 複製獲得的Token（格式如：`1234567890:ABCDEFGHIJK...`）

### **步驟2：獲取您的用戶ID**
1. 在Telegram中搜索 `@userinfobot`
2. 點擊Start或發送任意消息
3. 機器人會回復您的用戶ID（純數字）

### **步驟3：快速配置並啟動**

#### **方法A：使用快速啟動腳本**
```bash
cd C:\Users\XX11\Documents\GitHub\TG_WANG
python 快速啟動機器人.py
```
按提示輸入Bot Token和用戶ID即可。

#### **方法B：手動設置環境變量**
在命令提示符中運行：
```cmd
cd C:\Users\XX11\Documents\GitHub\TG_WANG

set BOT_TOKEN=您的Bot Token
set TEST_MODE=true
set ADMIN_IDS=您的用戶ID
set USDT_ADDRESS=TGEhjpGrYT2mtST2vHxTd5dTxfh21UzkRP

python main.py
```

#### **方法C：編輯.env文件**
1. 打開 `C:\Users\XX11\Documents\GitHub\TG_WANG\.env`
2. 替換以下內容：
   ```
   BOT_TOKEN=您的實際Bot Token
   ADMIN_IDS=您的實際用戶ID
   TEST_MODE=true
   USDT_ADDRESS=TGEhjpGrYT2mtST2vHxTd5dTxfh21UzkRP
   USDT_CONTRACT=TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t
   ```
3. 運行：`python main.py`

## 📱 **測試流程**

### **1. 啟動機器人後**
- 在Telegram中找到您的機器人
- 發送 `/start`
- 應該看到歡迎消息和功能按鈕

### **2. 測試免費試用**
- 點擊 "🛒 購買激活碼"
- 點擊 "🎁 申請免費試用"
- 應該立即收到激活碼

### **3. 預期結果**
機器人應該發送類似這樣的消息：
```
🎉 免費試用激活碼已生成！

🔑 激活碼: ABCD1234EFGH5678
⏰ 有效期: 2天
📝 使用方法: 
1. 下載TG營銷系統軟件
2. 在軟件中輸入此激活碼
3. 開始使用所有功能

💡 試用期結束後，歡迎購買正式版本！
```

## 🐛 **故障排除**

### **如果機器人仍無響應**
1. **檢查Bot Token是否正確**
   ```bash
   curl -X POST "https://api.telegram.org/bot您的Token/getMe"
   ```

2. **檢查機器人權限**
   - 確保機器人沒有被禁用
   - 確保您已經向機器人發送過消息

3. **查看錯誤日誌**
   - 運行機器人時注意Console輸出
   - 查看是否有紅色的錯誤信息

### **常見錯誤及解決**

#### **"Unauthorized"**
- Bot Token錯誤或過期
- 重新從@BotFather獲取Token

#### **"Can't parse entities"**
- 消息格式錯誤
- 檢查代碼中的Markdown格式

#### **數據庫錯誤**
- 確保有寫入權限
- 檢查磁盤空間

## 🔧 **進階配置**

### **如果要使用真實的USDT支付**
1. 設置 `TEST_MODE=false`
2. 配置TronScan API密鑰：
   - 訪問 https://tronscan.org/#/myaccount/apiKeys
   - 創建API密鑰
   - 設置 `TRONGRID_API_KEY=您的密鑰`

### **部署到Railway.com**
1. 在Railway項目中設置環境變量
2. 確保設置了所有必需的變量
3. 重新部署項目

## 📞 **如果還有問題**

請提供以下信息：
1. 機器人運行時的完整錯誤日誌
2. 您使用的操作系統
3. Python版本：`python --version`
4. 是否能看到機器人的歡迎消息

## 💡 **預防措施**

1. **定期檢查**：確保機器人持續運行
2. **備份數據**：定期備份bot_database.json
3. **監控日誌**：注意異常錯誤信息
4. **測試功能**：定期測試各項功能是否正常